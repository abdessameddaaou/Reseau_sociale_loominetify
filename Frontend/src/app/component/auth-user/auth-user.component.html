<!-- AuthComponent template -->
<div
  class="relative min-h-screen bg-[#f5f7fa] flex items-center justify-center p-5 overflow-hidden"
>
  <!-- halos de fond -->
  <div
    class="pointer-events-none absolute -top-[200px] -left-[200px] w-[500px] h-[500px] rounded-full"
    style="background: radial-gradient(circle, rgba(91,124,255,0.08) 0%, transparent 70%);"
  ></div>
  <div
    class="pointer-events-none absolute -bottom-[150px] -right-[150px] w-[400px] h-[400px] rounded-full"
    style="background: radial-gradient(circle, rgba(139,92,246,0.08) 0%, transparent 70%);"
  ></div>

  <div
    class="relative z-10 flex w-full max-w-5xl min-h-[650px] bg-white rounded-[30px] shadow-2xl gap-5"
  >
    <!-- GAUCHE -->
    <div
      class="flex-1 flex items-center justify-center bg-gradient-to-br from-[#5b7cff] to-[#8b5cf6] rounded-[30px] m-5 px-10 py-16 relative overflow-hidden"
    >
      <div class="w-full max-w-md text-white space-y-8">
        <div>
          <h2 class="text-3xl font-bold lowercase mb-2">loominetfy</h2>
          <p class="text-sm leading-relaxed text-white/85">
            Connectez-vous avec vos amis et le monde qui vous entoure sur loominetfy.
          </p>
        </div>

        <div class="space-y-4">
          <div class="flex items-start gap-3">
            <div
              class="w-10 h-10 rounded-xl bg-white/15 flex items-center justify-center backdrop-blur"
            >
              <span class="text-lg">üë•</span>
            </div>
            <div>
              <h3 class="text-sm font-semibold">Partagez vos moments</h3>
              <p class="text-xs text-white/85">
                Publiez des photos, vid√©os et pens√©es avec votre communaut√©.
              </p>
            </div>
          </div>

          <div class="flex items-start gap-3">
            <div
              class="w-10 h-10 rounded-xl bg-white/15 flex items-center justify-center backdrop-blur"
            >
              <span class="text-lg">üí¨</span>
            </div>
            <div>
              <h3 class="text-sm font-semibold">Restez connect√©</h3>
              <p class="text-xs text-white/85">
                √âchangez avec vos proches en temps r√©el.
              </p>
            </div>
          </div>

          <div class="flex items-start gap-3">
            <div
              class="w-10 h-10 rounded-xl bg-white/15 flex items-center justify-center backdrop-blur"
            >
              <span class="text-lg">üîí</span>
            </div>
            <div>
              <h3 class="text-sm font-semibold">S√©curis√© et priv√©</h3>
              <p class="text-xs text-white/85">
                Vos donn√©es sont prot√©g√©es et s√©curis√©es.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- DROITE -->
    <div
      [ngClass]="[
        'flex flex-col justify-center bg-white rounded-[30px] my-5 mr-5 px-10 py-10 transition-all duration-500',
        mode === 'signup' ? 'basis-[60%]' : 'basis-1/2'
      ]"
    >
      <!-- Header -->
      <div class="mb-8">
        <h1
          class="text-3xl font-bold bg-gradient-to-r from-[#5b7cff] to-[#8b5cf6] bg-clip-text text-transparent mb-1"
        >
          {{ mode === 'login' ? 'Bon retour !' : 'Cr√©er un compte' }}
        </h1>
        <p class="text-sm text-slate-500">
          {{ mode === 'login' ? 'Connectez-vous pour continuer' : 'Rejoignez la communaut√© loominetfy.' }}
        </p>
      </div>

      <!-- Toggle -->
      <div class="flex bg-slate-100 rounded-xl p-1 mb-7">
        <button
          class="flex-1 py-2.5 text-sm font-semibold rounded-lg transition-all"
          [ngClass]="
            mode === 'login'
              ? 'bg-gradient-to-r from-[#5b7cff] to-[#8b5cf6] text-white shadow-md'
              : 'text-slate-500'
          "
          type="button"
          (click)="setMode('login')"
        >
          Connexion
        </button>
        <button
          class="flex-1 py-2.5 text-sm font-semibold rounded-lg transition-all"
          [ngClass]="
            mode === 'signup'
              ? 'bg-gradient-to-r from-[#5b7cff] to-[#8b5cf6] text-white shadow-md'
              : 'text-slate-500'
          "
          type="button"
          (click)="setMode('signup')"
        >
          Inscription
        </button>
      </div>

      <!-- FORMULAIRE CONNEXION -->
      <form
        *ngIf="mode === 'login'"
        [formGroup]="loginForm"
        (ngSubmit)="onLogin()"
        class="flex flex-col gap-5"
      >
        <div>
          <label class="block text-xs font-medium text-slate-800 mb-1">Adresse email</label>
          <input
            type="email"
            formControlName="email"
            placeholder="votre@email.com"
            class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
          />
          <span
            *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
            class="block mt-1 text-xs text-red-600"
          >
            Email invalide
          </span>
        </div>

        <div>
          <label class="block text-xs font-medium text-slate-800 mb-1">Mot de passe</label>
          <input
            type="password"
            formControlName="password"
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
          />
        </div>

        <div class="text-right -mt-1 mb-1">
          <a
            routerLink="/reset-password"
            class="text-xs text-[#5b7cff] hover:text-[#8b5cf6] hover:underline"
            >Mot de passe oubli√© ?</a
          >
        </div>

        <button
          type="submit"
          class="relative inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-[#5b7cff] to-[#8b5cf6] px-4 py-3 text-sm font-semibold text-white shadow-md hover:shadow-lg hover:-translate-y-[1px] transition"
        >
          Se connecter
        </button>

        <div class="relative text-center text-xs text-slate-400 my-2">
          <span class="px-3 bg-white relative z-10">OU</span>
          <div class="absolute inset-x-0 top-1/2 h-px bg-slate-200 -z-0"></div>
        </div>

        <button
          type="button"
          class="w-full flex items-center justify-center gap-2 rounded-xl border-2 border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:border-[#5b7cff] hover:-translate-y-[1px] transition"
        >
          <!-- Ic√¥ne Google mini -->
          <span class="w-4 h-4">
            <svg viewBox="0 0 18 18">
              <path
                fill="#4285F4"
                d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"
              />
              <path
                fill="#34A853"
                d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"
              />
              <path
                fill="#FBBC05"
                d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"
              />
              <path
                fill="#EA4335"
                d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"
              />
            </svg>
          </span>
          <span>Continuer avec Google</span>
        </button>

        <p class="mt-6 text-center text-[11px] text-slate-400">
          En vous inscrivant, vous acceptez nos
          <a href="#" class="text-[#5b7cff] hover:text-[#8b5cf6]">Conditions d'utilisation</a>
          et la
          <a href="#" class="text-[#5b7cff] hover:text-[#8b5cf6]">Politique de confidentialit√©</a>.
        </p>
      </form>

      <!-- FORMULAIRE INSCRIPTION multi-√©tapes -->
      <form
        *ngIf="mode === 'signup'"
        [formGroup]="signupForm"
        (ngSubmit)="onSignup()"
        class="flex flex-col gap-5"
      >
        <!-- STEP 1 -->
        <ng-container *ngIf="signupStep === 1">
          <div>
            <label class="block text-xs font-medium text-slate-800 mb-1"
              >Nom complet (Pr√©nom et Nom)</label
            >
            <input
              type="text"
              formControlName="fullName"
              placeholder="Jean Dupont"
              class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
            />
            <span class="block mt-1 text-xs text-red-600 min-h-[1rem]">
              {{ signupErrors['fullName'] }}
            </span>
          </div>

          <div>
            <label class="block text-xs font-medium text-slate-800 mb-1">Adresse email</label>
            <input
              type="email"
              formControlName="email"
              placeholder="votre@email.com"
              class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
            />
            <span class="block mt-1 text-xs text-red-600 min-h-[1rem]">
              {{ signupErrors['email'] }}
            </span>
          </div>

          <button
            type="button"
            (click)="goFromStep1()"
            class="relative inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-[#5b7cff] to-[#8b5cf6] px-4 py-3 text-sm font-semibold text-white shadow-md hover:shadow-lg hover:-translate-y-[1px] transition"
          >
            Suivant
          </button>
        </ng-container>

        <!-- STEP 2 -->
        <ng-container *ngIf="signupStep === 2">
          <div>
            <label class="block text-xs font-medium text-slate-800 mb-1">Mot de passe</label>
            <input
              type="password"
              formControlName="password"
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
            />
            <span class="block mt-1 text-xs text-red-600 min-h-[1rem]">
              {{ signupErrors['password'] }}
            </span>
            <small class="block mt-1 text-[11px] text-slate-500">
              Min. 8 caract√®res, 1 majuscule, 1 chiffre, 1 caract√®re sp√©cial.
            </small>
          </div>

          <div>
            <label class="block text-xs font-medium text-slate-800 mb-1"
              >Num√©ro de t√©l√©phone (facultatif)</label
            >
            <input
              type="tel"
              formControlName="phone"
              placeholder="+33 6 12 34 56 78"
              class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
            />
          </div>

          <div class="flex gap-3">
            <button
              type="button"
              (click)="signupStep = 1; clearErrors();"
              class="flex-1 rounded-xl bg-slate-200 px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-300 transition"
            >
              Retour
            </button>
            <button
              type="button"
              (click)="goFromStep2()"
              class="flex-1 rounded-xl bg-gradient-to-r from-[#5b7cff] to-[#8b5cf6] px-4 py-3 text-sm font-semibold text-white shadow-md hover:shadow-lg hover:-translate-y-[1px] transition"
            >
              Suivant
            </button>
          </div>
        </ng-container>

        <!-- STEP 3 -->
        <ng-container *ngIf="signupStep === 3">
          <div>
            <label class="block text-xs font-medium text-slate-800 mb-1">Date de naissance</label>
            <input
              type="date"
              formControlName="birthdate"
              class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
            />
            <span class="block mt-1 text-xs text-red-600 min-h-[1rem]">
              {{ signupErrors['birthdate'] }}
            </span>
          </div>

          <div>
            <label class="block text-xs font-medium text-slate-800 mb-1"
              >Ville de r√©sidence (facultatif)</label
            >
            <input
              type="text"
              formControlName="city"
              placeholder="Paris"
              class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
            />
          </div>

          <div class="flex gap-3">
            <button
              type="button"
              (click)="signupStep = 2; clearErrors();"
              class="flex-1 rounded-xl bg-slate-200 px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-300 transition"
            >
              Retour
            </button>
            <button
              type="button"
              (click)="goFromStep3()"
              class="flex-1 rounded-xl bg-gradient-to-r from-[#5b7cff] to-[#8b5cf6] px-4 py-3 text-sm font-semibold text-white shadow-md hover:shadow-lg hover:-translate-y-[1px] transition"
            >
              Suivant
            </button>
          </div>
        </ng-container>

        <!-- STEP 4 -->
        <ng-container *ngIf="signupStep === 4">
          <div>
            <label class="block text-xs font-medium text-slate-800 mb-1">Question secr√®te</label>
            <select
              formControlName="secretQuestion"
              class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
            >
              <option value="">Choisissez une question</option>
              <option value="pet">Quel est le nom de votre premier animal de compagnie ?</option>
              <option value="city">Dans quelle ville √™tes-vous n√©(e) ?</option>
              <option value="school">Quel est le nom de votre √©cole primaire ?</option>
              <option value="food">Quel est votre plat pr√©f√©r√© ?</option>
            </select>
            <span class="block mt-1 text-xs text-red-600 min-h-[1rem]">
              {{ signupErrors['secretQuestion'] }}
            </span>
          </div>

          <div>
            <label class="block text-xs font-medium text-slate-800 mb-1">R√©ponse secr√®te</label>
            <input
              type="text"
              formControlName="secretAnswer"
              placeholder="Votre r√©ponse"
              class="w-full rounded-xl border-2 border-slate-200 px-4 py-3 text-sm outline-none transition focus:border-[#5b7cff] focus:ring-4 focus:ring-[#5b7cff]/10"
            />
            <span class="block mt-1 text-xs text-red-600 min-h-[1rem]">
              {{ signupErrors['secretAnswer'] }}
            </span>
          </div>

          <div class="flex gap-3">
            <button
              type="button"
              (click)="signupStep = 3; clearErrors();"
              class="flex-1 rounded-xl bg-slate-200 px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-300 transition"
            >
              Retour
            </button>
            <button
              type="submit"
              class="flex-1 rounded-xl bg-gradient-to-r from-[#5b7cff] to-[#8b5cf6] px-4 py-3 text-sm font-semibold text-white shadow-md hover:shadow-lg hover:-translate-y-[1px] transition"
            >
              S'inscrire
            </button>
          </div>

          <div class="relative text-center text-xs text-slate-400 my-3">
            <span class="px-3 bg-white relative z-10">OU</span>
            <div class="absolute inset-x-0 top-1/2 h-px bg-slate-200 -z-0"></div>
          </div>

          <button
            type="button"
            class="w-full flex items-center justify-center gap-2 rounded-xl border-2 border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:border-[#5b7cff] hover:-translate-y-[1px] transition"
          >
            <span class="w-4 h-4">
              <!-- m√™me ic√¥ne Google que plus haut -->
              <svg viewBox="0 0 18 18">
                <path
                  fill="#4285F4"
                  d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"
                />
                <path
                  fill="#34A853"
                  d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"
                />
                <path
                  fill="#FBBC05"
                  d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"
                />
                <path
                  fill="#EA4335"
                  d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"
                />
              </svg>
            </span>
            <span>Continuer avec Google</span>
          </button>

          <p class="mt-6 text-center text-[11px] text-slate-400">
            En vous inscrivant, vous acceptez nos
            <a href="#" class="text-[#5b7cff] hover:text-[#8b5cf6]">Conditions d'utilisation</a>
            et la
            <a href="#" class="text-[#5b7cff] hover:text-[#8b5cf6]">Politique de confidentialit√©</a>.
          </p>
        </ng-container>
      </form>
    </div>
  </div>
</div>
